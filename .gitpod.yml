image:
  file: .gitpod.Dockerfile

tasks:
  - init: |
      go install github.com/sqlc-dev/sqlc/cmd/sqlc@latest
      go install github.com/pressly/goose/v3/cmd/goose@latest
      go install github.com/cosmtrek/air@latest

      go get && go build ./...
  - command: |
      goose -dir migrations sqlite3 /litefs/potato.db up
      go run scripts/seed.go

vscode:
  extensions:
    - qwtel.sqlite-viewer
    - golang.go
    - redhat.vscode-yaml
